#!/usr/bin/env python

import pypureomapi
import sys

keyname = "dhcp_key"
#secret  = "6Qsf2UG4cvSli+Fup3bHI/4lCGO4i3SO6hl6WWBr042vUHktQ/1KiQwI 3MQrNrGs7c7EMDr/fho2Fzr3y1EP/Q=="
secret  = "3MQrNrGs7c7EMDr/fho2Fzr3y1EP/Q=="
server  = "127.0.0.1"
port    = 7911

try:
        oma = pypureomapi.Omapi(server, port, keyname, secret)
except pypureomapi.OmapiError, err:
        print "OMAPI error: %s" % (err,)
        sys.exit(1)

if sys.argv[1] == "add":
	oma.add_host_supersede_name(sys.argv[4], sys.argv[3], sys.argv[2])
elif sys.argv[1] == "del":
	oma.del_host(sys.argv[2])
else:
	print("Usage: omapi (add MAC IP|del MAC)")
